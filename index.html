<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Genesis One Swarm BETA</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
/* ===== GLOBAL DARK THEME ===== */
html,body{margin:0;height:100%;background:#000;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
*{box-sizing:border-box}

/* ===== MATRIX BACKDROP ===== */
#matrix{position:fixed;inset:0;z-index:0;background:#000;pointer-events:none}

/* ===== PAGE STACK ===== */
.wrapper{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;
         gap:1rem;min-height:100vh;padding:1rem 0 80px}
#title{font-size:2.1rem;font-weight:800;letter-spacing:1.2px;margin:0}
#datetime{font-size:1.4rem;font-weight:600;margin:0;text-align:center}

/* ===== WEATHER ===== */
#weather{display:flex;justify-content:space-between;width:90%;max-width:900px;margin-top:.25rem}
.cityWx{display:flex;flex-direction:column;align-items:center;gap:.1rem;flex:1}
.svgIcon{width:90px;height:90px}
.svgIcon svg{width:100%;height:100%}
.cityWx .temp{font-size:3rem;font-weight:800;text-shadow:0 0 5px #000}
.cityWx .label{font-size:.8rem;font-weight:700;opacity:.9}

/* ===== COMBINED CHART ===== */
#globalChart{width:90%;max-width:900px;height:160px;margin-top:.8rem}

/* ===== WORKER TABLE ===== */
#board{display:flex;flex-direction:column;gap:1.1rem;width:90%;max-width:900px}
.grid{display:grid;grid-template-columns:2.5rem 1fr 170px 1fr;align-items:center;column-gap:1rem}
.header{font-size:1.05rem;font-weight:600;opacity:.75;text-shadow:0 0 4px #000;text-align:center}
.row{font-size:1.7rem;font-weight:700;letter-spacing:.5px;margin-top:.55rem}
.row span{text-shadow:0 0 5px #000}
.icon{display:flex;justify-content:center;animation:glow 2s ease-in-out infinite}
.hashVal,.best{display:flex;justify-content:center;width:100%;text-align:center}
.highhash span:not(.icon){color:#00d0ff}

/* ===== GLOW FOR STATUS CIRCLES ===== */
@keyframes glow{
  0%{text-shadow:0 0 2px currentColor}
  50%{text-shadow:0 0 8px currentColor}
  100%{text-shadow:0 0 2px currentColor}
}

/* ===== RAINBOW SHIMMER (>2 T) ===== */
@keyframes rainbowShift{0%{background-position:0}100%{background-position:100%}}
.rainbow span:not(.icon){
  background:linear-gradient(90deg,red,orange,yellow,green,cyan,blue,purple,red);
  background-size:400%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:rainbowShift 4s linear infinite;
}

/* ===== SVG ANIMATIONS ===== */
@keyframes rotate360{to{transform:rotate(360deg)}}
@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
@keyframes fall{0%{transform:translateY(0);opacity:1}100%{transform:translateY(10px);opacity:0}}
.sunIcon{animation:rotate360 12s linear infinite;transform-origin:50% 50%}
.cloudIcon,.moonIcon,.fogIcon,.rainIcon,.snowIcon,.thunderIcon{animation:bob 5s ease-in-out infinite}
.rainIcon .drop,.snowIcon circle.flake{animation:fall .8s linear infinite}
.rainIcon .drop:nth-child(2),.snowIcon circle.flake:nth-child(2){animation-delay:.25s}
.rainIcon .drop:nth-child(3),.snowIcon circle.flake:nth-child(3){animation-delay:.5s}
.thunderFlash{animation:fall .6s ease-in-out infinite}

/* ===== NAV & FOOTER ===== */
#navlinks{position:fixed;bottom:34px;left:0;right:0;text-align:center;font-size:1rem;font-weight:700;z-index:1}
#navlinks a{color:#fff;text-decoration:none;margin:0 1.5rem}
#navlinks a:hover{text-shadow:0 0 6px #fff}
#footer{position:fixed;bottom:10px;left:0;right:0;text-align:center;font-size:.8rem;opacity:.8;text-shadow:0 0 4px #000;z-index:1}

/* ===== MOBILE ===== */
@media(max-width:600px){
  #title{font-size:1.5rem}#datetime{font-size:1.1rem}
  .svgIcon{width:60px;height:60px}.cityWx .temp{font-size:2.1rem}.cityWx .label{font-size:.7rem}
  .row{font-size:1rem}.grid{grid-template-columns:2rem 1fr 110px 110px}
  #globalChart{height:120px}
}
</style>
</head>

<body>
<canvas id="matrix"></canvas>

<div class="wrapper">
  <div id="title">Swarm BETA’s Ranking</div>
  <div id="datetime">Loading time…</div>

  <!-- WEATHER -->
  <div id="weather">
    <div class="cityWx">
      <div class="svgIcon" id="wxSeoulIcon"></div>
      <div class="temp" id="wxSeoulTemp">--°C</div>
      <div class="label">SEOUL</div>
    </div>
    <div class="cityWx">
      <div class="svgIcon" id="wxBusanIcon"></div>
      <div class="temp" id="wxBusanTemp">--°C</div>
      <div class="label">BUSAN</div>
    </div>
  </div>

  <!-- COMBINED HASH-RATE CHART -->
  <canvas id="globalChart"></canvas>

  <!-- WORKER TABLE -->
  <div id="board">
    <div class="header grid"><span></span><span>MEMBER</span><span>HASHRATE</span><span>BEST SHARE</span></div>
    <div id="workers"></div>
  </div>
</div>

<!-- NAV & COPYRIGHT -->
<div id="navlinks">
  <a href="https://genesisoneco.github.io/alpha-mining">Swarm ALPHA</a>
  <a href="https://genesisoneco.github.io/beta-mining">Swarm BETA</a>
</div>
<div id="footer">Genesis One Mining © 2025</div>

<script>
/* ---------- INLINE SVG ICONS ---------- */
const SVG={
  sun:`<svg viewBox="0 0 64 64" class="sunIcon"><circle cx="32" cy="32" r="12" fill="#FFD93B"/>
       <g stroke="#FFD93B" stroke-width="4" stroke-linecap="round">
       <line x1="32" y1="4"  x2="32" y2="14"/><line x1="32" y1="50" x2="32" y2="60"/>
       <line x1="4"  y1="32" x2="14" y2="32"/><line x1="50" y1="32" x2="60" y2="32"/>
       <line x1="12" y1="12" x2="19" y2="19"/><line x1="45" y1="45" x2="52" y2="52"/>
       <line x1="12" y1="52" x2="19" y2="45"/><line x1="45" y1="19" x2="52" y2="12"/></g></svg>`,
  moon:`<svg viewBox="0 0 64 64" class="moonIcon">
        <path d="M42 32a22 22 0 0 1-22 22 22 22 0 0 0 0-44 22 22 0 0 1 22 22z" fill="#F4E3A5"/></svg>`,
  cloud:`<svg viewBox="0 0 64 64" class="cloudIcon">
         <ellipse cx="32" cy="36" rx="18" ry="12" fill="#C9D6DF"/>
         <ellipse cx="22" cy="32" rx="12" ry="10" fill="#C9D6DF"/>
         <ellipse cx="42" cy="32" rx="12" ry="10" fill="#C9D6DF"/></svg>`,
  fog:`<svg viewBox="0 0 64 64" class="fogIcon">
       <ellipse cx="32" cy="36" rx="18" ry="12" fill="#C9D6DF"/>
       <ellipse cx="22" cy="32" rx="12" ry="10" fill="#C9D6DF"/>
       <ellipse cx="42" cy="32" rx="12" ry="10" fill="#C9D6DF"/>
       <g stroke="#999" stroke-width="4" stroke-linecap="round">
       <line x1="16" y1="48" x2="48" y2="48"/><line x1="12" y1="56" x2="52" y2="56"/></g></svg>`,
  rain:`<svg viewBox="0 0 64 64" class="rainIcon">
        ${SVG.cloud?.replace('class="cloudIcon"','')??''}
        <g fill="#00BFFF">
          <circle class="drop" cx="24" cy="46" r="3"/>
          <circle class="drop" cx="32" cy="46" r="3"/>
          <circle class="drop" cx="40" cy="46" r="3"/>
        </g></svg>`,
  snow:`<svg viewBox="0 0 64 64" class="snowIcon">
        ${SVG.cloud?.replace('class="cloudIcon"','')??''}
        <g fill="#fff">
          <circle class="flake" cx="24" cy="46" r="3"/>
          <circle class="flake" cx="32" cy="46" r="3"/>
          <circle class="flake" cx="40" cy="46" r="3"/>
        </g></svg>`,
  thunder:`<svg viewBox="0 0 64 64" class="thunderIcon">
           ${SVG.cloud?.replace('class="cloudIcon"','')??''}
           <polygon class="thunderFlash" points="30,44 38,44 34,56" fill="#FFDA2D"/></svg>`
};
const emojiFallback={sun:'☀️',moon:'🌙',cloud:'☁️',fog:'🌫️',rain:'🌧️',snow:'❄️',thunder:'⛈️'};

/* map weathercode -> icon key */
function iconKey(code,n){
  if(code===0)return n?'moon':'sun';
  if([1,2].includes(code))return n?'moon':'sun';
  if(code===3)return'cloud';
  if([45,48].includes(code))return'fog';
  if([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code))return'rain';
  if([71,73,75,77,85,86].includes(code))return'snow';
  if([95,96,99].includes(code))return'thunder';
  return'sun';
}

/* ===== WEATHER FETCH ===== */
const WX={
  seoul:{lat:37.566,lon:126.978,icon:'wxSeoulIcon',temp:'wxSeoulTemp',lastTemp:'--'},
  busan:{lat:35.1796,lon:129.0756,icon:'wxBusanIcon',temp:'wxBusanTemp',lastTemp:'--'}
};
const WX_URL='https://api.open-meteo.com/v1/forecast?current_weather=true&timezone=Asia%2FSeoul';
const isNight=()=>{const h=new Date().getHours();return h<6||h>=18;};

async function refreshWeather(){
  for(const loc of Object.values(WX)){
    try{
      const j=await(await fetch(`${WX_URL}&latitude=${loc.lat}&longitude=${loc.lon}`)).json();
      if(!j.current_weather)throw'no cw';
      const {temperature,weathercode}=j.current_weather,n=isNight();
      loc.lastTemp=Math.round(temperature);
      document.getElementById(loc.temp).textContent=`${loc.lastTemp}°C`;
      const key=iconKey(weathercode,n);
      document.getElementById(loc.icon).innerHTML=SVG[key];
    }catch(e){
      console.error('weather',e);
      document.getElementById(loc.temp).textContent=`${loc.lastTemp}°C`;
      const fallbackSpan=`<span style="font-size:64px">${emojiFallback.cloud}</span>`;
      document.getElementById(loc.icon).innerHTML=fallbackSpan;
    }
  }
}
refreshWeather();setInterval(refreshWeather,900000);

/* ===== CLOCK ===== */
setInterval(()=>datetime.textContent=
  new Date().toLocaleString(undefined,{weekday:'short',year:'numeric',month:'long',day:'numeric',
    hour:'2-digit',minute:'2-digit',second:'2-digit'}),1000);

/* ===== POOL + CHART + MATRIX RAIN (unchanged from previous working version) ===== */
/* ... keep exactly the same JS for pool fetching, chart drawing, matrix rain ... */
</script>
</body>
</html>
